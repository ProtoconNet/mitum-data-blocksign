components:
  schemas:
    Hint:
      type: string
      example: mitum-currency-node-info-v0.0.1

    Problem:
      type: object
      required:
      - _hint
      - title
      - type
      - detail
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              example: mitum-currency-problem-v0.0.1
              default: mitum-currency-problem-v0.0.1
        title:
          type: string
          example: "failed to sign"
        type:
          type: string
          example: "https://github.com/spikeekips/mitum-currency/problems/others"
        detail:
          type: string
          example: "invalid privatekey"

    Seal:
      type: object
      required:
        - _hint
        - hash
        - body_hash
        - signer
        - signature
        - signed_at
        - operations
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              example: seal-v0.0.1
              default: seal-v0.0.1
        hash:
          type: string
          format: hash
          example: yaJGkXgizfaB3HEAf9LWdWBC3Sh954pzuc2tNTM9PHG
        body_hash:
          type: string
          format: hash
          example: zaJGkXgizfaB3HEAf9LWdWBC3Sh954pzuc2tNTM9PHG
        signer:
          type: string
          example: 04805444d3eb37090874c13d5620657b33a7f2c98f631ca2c2f87ff6ebace5cf0c0fbf860ea6003a7ad01d57f8e5582aa2aad1345d5d2bf5c2e703e340ff7b690d-0115:0.0.1
        signature:
          type: string
          format: signature
          example: 5BpRZ6vnScSTCDt5K7wKiJPefMTjzZs5sE1U1ZoZ5XAgG7CG45z97N9Vt6PZtnRwGn7fx5mnBVANDgEHJ1YfS5yALXdD1
        signed_at:
          type: string
          format: date-time
          example: "2020-10-13T23:37:20Z"
        operations:
          type: array
          items:
            $ref: '#/components/schemas/Operation'

    HAL:
      type: object
      required:
      - _hint
      - _links
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              example: mitum-currency-hal-v0.0.1
              default: mitum-currency-hal-v0.0.1
        _embedded:
          type: object
          default: {}
        _links:
          type: object
          properties:
            self:
              allOf:
                - $ref: '#/components/schemas/HALLink'
                - type: object
                  properties:
                    href:
                      type: string
                      default: /
                      example: /
                    templated:
                      type: boolean
                      default: false
                      example: false

    HALLink:
      type: object
      required:
        - href
      properties:
        href:
          type: string
        templated:
          type: boolean
          description: The link is is templated link, not used without it's arguments.
          default: false
          example: false

    NodeInfoHAL:
      allOf:
        - $ref: '#/components/schemas/HAL'
        - type: object
          properties:
            hint:
              type: string
              default: mitum-currency-node-info-v0.0.1
              example: mitum-currency-node-info-v0.0.1
            _embedded:
              $ref: '#/components/schemas/NodeInfo'
            _links:
              type: object
              properties:
                self:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          default: /
                          example: /
                block:prev:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/243
                block:next:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/245
                block:current:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/244
                block:current-manifest:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/244/manifest
                block:{height}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          default: /block/{height:[0-9]+}
                          example: /block/{height:[0-9]+}
                        templated:
                          type: boolean
                          default: true
                          example: true
                manifest:{height}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          default: /block/{height:[0-9]+}/manifest
                          example: /block/{height:[0-9]+}/manifest
                        templated:
                          type: boolean
                          default: true
                          example: true
                block:{hash}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          default: /block/{hash:(?i)[0-9a-z][0-9a-z]+}
                          example: /block/{hash:(?i)[0-9a-z][0-9a-z]+}
                        templated:
                          type: boolean
                          default: true
                          example: true
                manifest:{hash}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          default: /block/{hash:(?i)[0-9a-z][0-9a-z]+}/manifest
                          example: /block/{hash:(?i)[0-9a-z][0-9a-z]+}/manifest
                        templated:
                          type: boolean
                          default: true
                          example: true

    BlockHAL:
      allOf:
        - $ref: '#/components/schemas/HAL'
        - type: object
          properties:
            _links:
              type: object
              properties:
                self:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/333
                prev:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/243
                next:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/245
                current:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/244
                current-manifest:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/244/manifest
                block:{height}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/333
                        templated:
                          type: boolean
                          default: true
                          example: true
                manifest:{height}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/33/manifest
                        templated:
                          type: boolean
                          default: true
                          example: true
                block:{hash}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/KqvjCvX8LCKBPSZA8KoqhLEdzVtGNtSrwvuPuL5rNb6y
                        templated:
                          type: boolean
                          default: true
                          example: true
                manifest:{hash}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/KqvjCvX8LCKBPSZA8KoqhLEdzVtGNtSrwvuPuL5rNb6y/manifest
                        templated:
                          type: boolean
                          default: true
                          example: true

    Node:
      type: object
      required:
        - _hint
        - address
        - published
        - url
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              example: base-node-v0.0.1
              default: base-node-v0.0.1
        address:
          $ref: '#/components/schemas/NodeAddress'
        publickey:
          $ref: '#/components/schemas/NodePublicKey'
        url:
          type: string
          example: quic://127.0.0.1:54321

    NodeInfo:
      type: object
      required:
      - _hint
      - node
      - network_id
      - state
      - last_block
      - version
      - url
      - policy
      - suffrage
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: mitum-currency-node-info-v0.0.1
              example: mitum-currency-node-info-v0.0.1
        node:
          $ref: '#/components/schemas/Node'
        network_id:
          type: string
          example: "bWM7IFRodSAxMCBTZXAgMjAyMCAwMzoyMzozMSBQTSBVVEM="
        state:
          type: string
          example: CONSENSUS
          default: BOOTING
          enum:
          - STOPPED
          - BOOTING
          - CONSENSUS
          - JOINGING
          - SYNCING
          - BROKEN
        last_block:
          $ref: '#/components/schemas/Manifest'
        version:
          type: string
          example: v0.0.1
        url:
          type: string
          description: node published url
          example: quic://127.0.0.1:54321
        policy:
          type: object
          properties:
            threshold:
              type: integer
              description: minimum threshold of agreement for new block
              example: 67
            max_operations_in_seal:
              type: integer
              description: maximum number of operations in one seal
              example: 100
            max_operations_in_proposal:
              type: integer
              description: maximum number of operations in one proposal
              example: 100
            interval_broadcasting_proposal:
              type: integer
              example: 1000000000
            wait_broadcasting_accept_ballot:
              type: integer
              example: 1000000000
            timespan_valid_ballot: 
              type: integer
              example: 60000000000
            timeout_waiting_proposal:
              type: integer
              example: 5000000000
            interval_broadcasting_init_ballot:
              type: integer
              example: 1000000000
            interval_broadcasting_accept_ballot:
              type: integer
              example: 1000000000
            network_connection_timeout:
              type: integer
              example: 3000000000
        suffrage:
          type: array
          items:
            type: object
            required: 
              - address
              - publickey
              - url
            properties:
              address:
                $ref: '#/components/schemas/NodeAddress'
              publickey:
                $ref: '#/components/schemas/NodePublicKey'
              url:
                type: string
                example: https://127.0.0.1:54321
              insecure:
                type: boolean
                example: true
    
    Manifest:
      type: object
      required:
      - _hint
      - hash
      - height
      - round
      - proposal
      - previous_block
      - block_operations
      - block_states
      - confirmed_at
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: block-manifest-v0.0.1
              example: block-manifest-v0.0.1
        hash:
          type: string
          format: hash
          description: hash of block
          example: zaJGkXgizfaB3HEAf9LWdWBC3Sh954pzuc2tNTM9PHG
        height:
          $ref: '#/components/schemas/Height'
        round:
          type: integer
          format: int64
          example: 0
        proposal:
          type: string
          description: hash of proposal ballot
          example: DPZsPTmgDGkRJXwoQYm1ZbNaNLRva5Cz8ZNJKuaoZNqX
        previous_block:
          type: string
          description: hash of previous block
          example: Gzsv15iXxrJFbbqdCJw7wGLzdbB9HpoSJrEyA2cTcMjw
        block_operations:
          type: string
          description: root hash of operation tree
          example: Yksv15iXxrJFbbqdCJw7wGLzdbB9HpoSJrEyA2cTcMjj
        block_states:
          type: string
          description: root hash of states tree
          example: Aksv15iXxrJFbbqdCJw7wGLzdbB9HpoSJrEyA2cTcMjj
        confirmed_at:
          type: string
          format: date-time
          description: confirmed time of block
          example: "2020-10-13T15:04:50Z"
        created_at:
          type: string
          format: date-time
          description: saved time in node
          example: "2020-10-14T00:04:51Z"

    Height:
      description: >-
        height of *block*.
      type: integer
      format: int64

    AccountKey:
      description: >-
        *publickey* and *weight* to access account.
      type: object
      required:
      - _hint
      - key
      - weight
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: a003:0.0.1
              example: a003:0.0.1
        key:
          description: >-
            *publickey*
          type: string
          format: publickey
          example: 04b96826d72457a38aa9a2298c3f435f655c28a7d8e94b4e3adf772ac11e3101cbecf9e755312f8a61bd565c182f0d9d67d24f1590ddd2fef1d0af126b5bdfa5a7-0115:0.0.1
        weight:
          description: >-
            *weight* should be `> 1` and  `<= 100`.
          type: integer
          format: int32
          example: 100

    AccountKeys:
      description: >-
        *AccountKey*s and *threshold* of the account. *AccountKeys* authorizes *operation* to modify
        the state of account if the *FactSign* of operation have the enough signs of *AccountKeys*.

        - Multiple *AccountKey* can be defined and at least, one *AccountKey* should be defined.

        - The sum of *weight* of *AccountKey*s should be over *threshold*.


        For example, if there are 3 *AccountKey* and *threshold* is `60`,

        - `key0`:
          * publickey: `key0-pub`
          * weight: `30`

        - `key1`:
          * publickey: `key1-pub`
          * weight: `30`

        - `key2`:
          * publickey: `key2-pub`
          * weight: `30`

        The *FactSign* of the operation consists with signs of `key0` and `key1`. In this
        *FactSign*, the sum of *weight* is `60` and is same or over *threshold*, `sum=60 >=
        threshold=60`, so this *FactSign* authorizes the operation.
      type: object
      required:
      - _hint
      - keys
      - threshold
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: a004:0.0.1
              example: a004:0.0.1
        keys:
          type: array
          items:
            $ref: '#/components/schemas/AccountKey'
        threshold:
          description: >-
            *threshold* should be `> 0` and `<= 100`.
          type: integer
          format: int32
          example: 100

    Account:
      type: object
      required:
      - _hint
      - hash
      - address
      - keys
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: a014:0.0.1
              example: a014:0.0.1
        hash:
          type: string
          format: hash
          description: hash account
          example: CkNB7yu1YbAU5c8LFRV6HbFiuj9azQ3LCwuTuxMREbkd
        address:
          allOf:
            - $ref: '#/components/schemas/AccountAddress'
            - description: account address
        keys:
          type: object
          properties:
            _hint:
              allOf:
                - $ref: '#/components/schemas/Hint'
                - type: string
                  default: a004:0.0.1
                  example: a004:0.0.1
            keys:
              type: array
              items:
                type: object
                properties:
                  _hint:
                    allOf:
                      - $ref: '#/components/schemas/Hint'
                      - type: string
                        default: a003:0.0.1
                        example: a003:0.0.1
                  weight:
                    type: integer
                    format: int32
                    example: 100
                  key:
                    type: string
                    example: 04b96826d72457a38aa9a2298c3f435f655c28a7d8e94b4e3adf772ac11e3101cbecf9e755312f8a61bd565c182f0d9d67d24f1590ddd2fef1d0af126b5bdfa5a7-0115:0.0.1
            threshold:
              type: integer
              format: int32
              example: 100

    ManifestHAL:
      allOf:
        - $ref: '#/components/schemas/HAL'
        - type: object
          properties:
            hint:
              type: string
              default: block-manifest-v0.0.1
              example: block-manifest-v0.0.1
            _links:
              type: object
              properties:
                self:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/244/manifest
                prev:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/243/manifest
                next:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/245/manifest
                alternate:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          default: /block/{hash:(?i)[0-9a-z][0-9a-z]+}/manifest
                block:{height}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          default: /block/{height:[0-9]+}
                          example: /block/{height:[0-9]+}
                        templated:
                          type: boolean
                          default: true
                          example: true
                manifest:{height}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          default: /block/{height:[0-9]+}/manifest
                          example: /block/{height:[0-9]+}/manifest
                        templated:
                          type: boolean
                          default: true
                          example: true
                block:{hash}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          default: /block/{hash:(?i)[0-9a-z][0-9a-z]+}
                          example: /block/{hash:(?i)[0-9a-z][0-9a-z]+}
                        templated:
                          type: boolean
                          default: true
                          example: true
                manifest:{hash}:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          default: /block/{hash:(?i)[0-9a-z][0-9a-z]+}/manifest
                          example: /block/{hash:(?i)[0-9a-z][0-9a-z]+}/manifest
                        templated:
                          type: boolean
                          default: true
                          example: true
            _embedded:
              $ref: '#/components/schemas/Manifest'

    AccountHAL:
      allOf:
        - $ref: '#/components/schemas/HAL'
        - type: object
          properties:
            hint:
              type: object
              properties:
                name:
                  type: string
                  default: mitum-currency-account-value
                  example: mitum-currency-account-value
                hint:
                  type: string
                  default: a018:0.0.1
                  example: a018:0.0.1
            _embedded:
              $ref: '#/components/schemas/AccountValue'
            _links:
              type: object
              properties:
                self:
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /account/B5ev8dDUpAdkCUnm8N2RQwUM86kcCLQqhCBd78FTxhtv-a000:0.0.1
                operations:
                  description: >-
                    *operation*s, which are related of the account.
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /account/B5ev8dDUpAdkCUnm8N2RQwUM86kcCLQqhCBd78FTxhtv-a000:0.0.1/operations
                operations:{offset}:
                  description: >-
                    *operation*s, which are related of the account after offset.
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /account/B5ev8dDUpAdkCUnm8N2RQwUM86kcCLQqhCBd78FTxhtv-a000:0.0.1/operations?offset={offset}
                        templated:
                          type: boolean
                          default: true
                          example: true
                operations:{offset,reverse}:
                  description: >-
                    *operation*s, which are related of the account after offset by reverse order.
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /account/B5ev8dDUpAdkCUnm8N2RQwUM86kcCLQqhCBd78FTxhtv-a000:0.0.1/operations?offset={offset&reverse=1}
                        templated:
                          type: boolean
                          default: true
                          example: true
                block:
                  description: >-
                    Request `/block/{height}`.
                  allOf:
                    - $ref: '#/components/schemas/HALLink'
                    - type: object
                      properties:
                        href:
                          type: string
                          example: /block/244

    FactSign:
      description: >-
        *FactSign* represents the *signer* signs the *operation* with valid *hash* of *operation*.
      type: object
      required:
      - _hint
      - signer
      - signature
      - signed_at
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              example: base-fact-sign-v0.0.1
              default: base-fact-sign-v0.0.1
        signer:
          description: >-
            *publickey*, which signes the operation
          type: string
          format: publickey
          example: 04805444d3eb37090874c13d5620657b33a7f2c98f631ca2c2f87ff6ebace5cf0c0fbf860ea6003a7ad01d57f8e5582aa2aad1345d5d2bf5c2e703e340ff7b690d-0115:0.0.1
        signature:
          description: signature, created by *signer*. Usually it is encoded thru *bsae58*.
          type: string
          format: signature
          example: 5BpRZ6vnScSTCDt5K7wKiJPefMTjzZs5sE1U1ZoZ5XAgG7CG45z97N9Vt6PZtnRwGn7fx5mnBVANDgEHJ1YfS5yALXdD1
        signed_at:
          description: time to be signed
          type: string
          format: date-time
          example: "2020-10-13T23:37:20Z"

    BaseFact:
      type: object
      required:
      - _hint
      - hash
      - token
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: a005:0.0.1
              example: a005:0.0.1
        hash:
          type: string
          format: hash
          example: 4jhzcudKgtoPGR6rA7Fuxmfwz3C8KGiP5MEKXuBXcW9j
        token:
          type: string
          format: bytes
          example: cmFpc2VkIGJ5

    Operation:
      type: object
      required:
      - _hint
      - fact_signs
      - hash
      - fact
      properties:
        _hint:
          allOf:
            - type: string
        fact_signs:
          type: array
          items:
            $ref: '#/components/schemas/FactSign'
        hash:
          description: operation hash
          type: string
          format: hash
          example: 8u4ua32jnYjS1BP8jBoL2BYqSwdZTno8vd4NzujbZQbH
        fact:
          type: object
          required:
          - _hint
          - hash
          - token
          properties:
            _hint:
              allOf:
                - $ref: '#/components/schemas/Hint'
                - type: string
                  default: a008:0.0.1
                  example: a008:0.0.1
            hash:
              description: operation fact hash
              type: string
              format: hash
              example: 9u4ua32jnYjS1BP8jBoL2BYqSwdZTno8vd4NzujbZQbH
            token:
              type: string
              format: bytes
              example: cmFpc2VkIGJ5
        memo:
          type: string
          example: "show me and find me"

    CreateAccounts:
      allOf:
        - $ref: '#/components/schemas/Operation'
        - type: object
          properties:
            _hint:
              type: string
              default: mitum-currency-create-accounts-operation-v0.0.1
              example: mitum-currency-create-accounts-operation-v0.0.1
        - type: object
          properties:
            fact:
              $ref: '#/components/schemas/CreateAccountsFact'

    CreateDocuments:
      allOf:
        - $ref: '#/components/schemas/Operation'
        - type: object
          properties:
            _hint:
              type: string
              default: mitum-blocksign-create-documents-operation-v0.0.1
              example: mitum-blocksign-create-documents-operation-v0.0.1
        - type: object
          properties:
            fact:
              $ref: '#/components/schemas/CreateDocumentsFact'

    TransferDocuments:
      allOf:
        - $ref: '#/components/schemas/Operation'
        - type: object
          properties:
            _hint:
              type: string
              default: mitum-blocksign-transfer-documents-operation-v0.0.1
              example: mitum-blocksign-transfer-documents-operation-v0.0.1
        - type: object
          properties:
            fact:
              $ref: '#/components/schemas/TransferDocumentsFact'

    SignDocuments:
      allOf:
        - $ref: '#/components/schemas/Operation'
        - type: object
          properties:
            _hint:
              type: string
              default: mitum-blocksign-sign-documents-operation-v0.0.1
              example: mitum-blocksign-sign-documents-operation-v0.0.1
        - type: object
          properties:
            fact:
              $ref: '#/components/schemas/SignDocumentsFact'

    KeyUpdater:
      allOf:
        - $ref: '#/components/schemas/Operation'
        - type: object
          properties:
            _hint:
              type: string
              default: mitum-currency-keyupdater-operation-v0.0.1
              example: mitum-currency-keyupdater-operation-v0.0.1
        - type: object
          properties:
            fact:
              $ref: '#/components/schemas/KeyUpdaterFact'

    Transfers:
      allOf:
        - $ref: '#/components/schemas/Operation'
        - type: object
          properties:
            _hint:
              type: string
              default: mitum-currency-transfers-operation-v0.0.1
              example: mitum-currency-transfers-operation-v0.0.1
        - type: object
          properties:
            fact:
              $ref: '#/components/schemas/TransfersFact'

    CurrencyRegister:
      allOf:
        - $ref: '#/components/schemas/Operation'
        - type: object
          properties:
            _hint:
              type: string
              default: mitum-currency-currency-register-operation-v0.0.1
              example: mitum-currency-currency-register-operation-v0.0.1
        - type: object
          properties:
            fact:
              $ref: '#/components/schemas/CurrencyRegisterFact'

    CurrencyPolicyUpdater:
      allOf:
        - $ref: '#/components/schemas/Operation'
        - type: object
          properties:
            _hint:
              type: string
              default: mitum-currency-currency-policy-updater-operation-v0.0.1
              example: mitum-currency-currency-policy-updater-operation-v0.0.1
        - type: object
          properties:
            fact:
              $ref: '#/components/schemas/CurrencyPolicyUpdaterFact'

    CreateAccountsFact:
      allOf:
        - $ref: '#/components/schemas/BaseFact'
        - type: object
          required:
          - sender
          - items
          properties:
            _hint:
              allOf:
                - $ref: '#/components/schemas/Hint'
                - type: string
                  example: mitum-currency-create-accounts-operation-fact_v0.0.1
                  default: mitum-currency-create-accounts-operation-fact-v0.0.1
            hash:
              type: string
              format: hash
              example: 4jhzcudKgtoPGR6rA7Fuxmfwz3C8KGiP5MEKXuBXcW9j
            token:
              description: >-
                *token* value should be encoded by base64.
              type: string
              format: bytes
              example: cmFpc2VkIGJ5
            sender:
              allOf:
                - $ref: '#/components/schemas/AccountAddress'
            items:
              type: array
              items:
                type: object
                required:
                - keys
                - amount
                properties:
                  keys:
                    $ref: '#/components/schemas/AccountKeys'
                  amounts:
                    type: array
                    items:
                      description: The initial balance of account.
                      allOf:
                        - $ref: '#/components/schemas/Amount'

    CreateAccountsFactForTemplate:
      allOf:
        - $ref: '#/components/schemas/CreateAccountsFact'
        - type: object
          properties:
            hash:
              description: >-
                The value of hash will be generated automatically by builder. *Don't need to edit*.
            token:
              description: >-
                Replace your own token. *token* value should be encoded by base64.
            sender:
              description: Replace your own sender address.
                    
    CreateDocumentsFact:
          allOf:
            - $ref: '#/components/schemas/BaseFact'
            - type: object
              required:
              - sender
              - items
              properties:
                _hint:
                  allOf:
                    - $ref: '#/components/schemas/Hint'
                    - type: string
                      example: mitum-blocksign-create-documents-operation-fact_v0.0.1
                      default: mitum-blocksign-create-documents-operation-fact-v0.0.1
                hash:
                  type: string
                  format: hash
                  example: 4jhzcudKgtoPGR6rA7Fuxmfwz3C8KGiP5MEKXuBXcW9j
                token:
                  description: >-
                    *token* value should be encoded by base64.
                  type: string
                  format: bytes
                  example: cmFpc2VkIGJ5
                sender:
                  allOf:
                    - $ref: '#/components/schemas/AccountAddress'
                    - description: Replace your own sender address.
                items:
                  type: array
                  items:
                    type: object
                    required:
                    - filehash
                    - signers
                    - cid
                    properties:
                      filehash:
                        type: string
                      signers:
                        type: array
                        items:
                          description: signers address.
                          allOf:
                            - $ref: '#/components/schemas/AccountAddress'
                      cid:
                        type: string

    TransferDocumentsFact:
          allOf:
            - $ref: '#/components/schemas/BaseFact'
            - type: object
              required:
              - sender
              - items
              properties:
                _hint:
                  allOf:
                    - $ref: '#/components/schemas/Hint'
                    - type: string
                      example: mitum-blocksign-transfer-documents-operation-fact_v0.0.1
                      default: mitum-blocksign-transfer-documents-operation-fact-v0.0.1
                hash:
                  type: string
                  format: hash
                  example: 4jhzcudKgtoPGR6rA7Fuxmfwz3C8KGiP5MEKXuBXcW9j
                token:
                  description: >-
                    *token* value should be encoded by base64.
                  type: string
                  format: bytes
                  example: cmFpc2VkIGJ5
                sender:
                  allOf:
                    - $ref: '#/components/schemas/AccountAddress'
                    - description: Replace your own sender address.
                items:
                  type: array
                  items:
                    type: object
                    required:
                    - filehash
                    - signers
                    - cid
                    properties:
                      documentid:
                        type: integer
                      owner:
                        type: object
                        description: owner address.
                        allOf:
                          - $ref: '#/components/schemas/AccountAddress'
                      receiver:
                        type: object
                        description: receiver address.
                        allOf:
                          - $ref: '#/components/schemas/AccountAddress'
                      cid:
                        type: string

    SignDocumentsFact:
          allOf:
            - $ref: '#/components/schemas/BaseFact'
            - type: object
              required:
              - sender
              - items
              properties:
                _hint:
                  allOf:
                    - $ref: '#/components/schemas/Hint'
                    - type: string
                      example: mitum-blocksign-transfer-documents-operation-fact_v0.0.1
                      default: mitum-blocksign-transfer-documents-operation-fact-v0.0.1
                hash:
                  type: string
                  format: hash
                  example: 4jhzcudKgtoPGR6rA7Fuxmfwz3C8KGiP5MEKXuBXcW9j
                token:
                  description: >-
                    *token* value should be encoded by base64.
                  type: string
                  format: bytes
                  example: cmFpc2VkIGJ5
                sender:
                  allOf:
                    - $ref: '#/components/schemas/AccountAddress'
                    - description: Replace your own sender address.
                items:
                  type: array
                  items:
                    type: object
                    required:
                    - documentid
                    - owner
                    - receiver
                    - cid
                    properties:
                      documentid:
                        type: integer
                      owner:
                        type: object
                        description: owner address.
                        allOf:
                          - $ref: '#/components/schemas/AccountAddress'
                      cid:
                        type: string


    KeyUpdaterFact:
      allOf:
        - $ref: '#/components/schemas/BaseFact'
        - type: object
          required:
          - _hint
          - hash
          - token
          - target
          - keys
          - currency
          properties:
            _hint:
              allOf:
                - $ref: '#/components/schemas/Hint'
                - type: string
                  example: mitum-currency-keyupdater-operation-fact-v0.0.1
                  default: mitum-currency-keyupdater-operation-fact-v0.0.1
            hash:
              type: string
              format: hash
              example: 2TsuSVfu5eUEZnGxztyn3fWo5bHS1nu861wJReXajw4u
            token:
              description: >-
                *token* value should be encoded by base64.
              type: string
              format: bytes
              example: cmFpc2VkIGJ5
            target:
              allOf:
                - $ref: '#/components/schemas/AccountAddress'
            keys:
              $ref: '#/components/schemas/AccountKeys'
            currency:
              allOf:
                - $ref: '#/components/schemas/AccountKeys'
                - description: currency for fee

    KeyUpdaterFactForTemplate:
      allOf:
        - $ref: '#/components/schemas/KeyUpdaterFact'
        - type: object
          properties:
            hash:
              description: >-
                The value of hash will be generated automatically by builder. *Don't need to edit*.
            token:
              description: >-
                Replace your own token. *token* value should be encoded by base64.
            target:
                description: Replace your own account owner address.

    TransfersFact:
      allOf:
        - $ref: '#/components/schemas/BaseFact'
        - type: object
          required:
          - _hint
          - hash
          - token
          - sender
          - items
          properties:
            _hint:
              allOf:
                - $ref: '#/components/schemas/Hint'
                - type: string
                  example: mitum-currency-transfers-operation-fact-v0.0.1
                  default: mitum-currency-transfers-operation-fact-v0.0.1
            hash:
              type: string
              format: hash
              example: 4jhzcudKgtoPGR6rA7Fuxmfwz3C8KGiP5MEKXuBXcW9j
            token:
              description: >-
                *token* value should be encoded by base64.
              type: string
              format: bytes
              example: cmFpc2VkIGJ5
            sender:
              allOf:
                - $ref: '#/components/schemas/AccountAddress'
            items:
              type: array
              items:
                type: object
                required:
                - receiver
                - amount
                properties:
                  receiver:
                    allOf:
                      - $ref: '#/components/schemas/AccountAddress'
                      - description: Receiver account address.
                  amounts:
                    type: array
                    items:
                      description: The amount to transfer.
                      allOf:
                        - $ref: '#/components/schemas/Amount'

    TransfersFactForTemplate:
      allOf:
        - $ref: '#/components/schemas/TransfersFact'
        - type: object
          required:
          - _hint
          - hash
          - token
          - sender
          - items
          properties:
            hash:
              description: >-
                The value of hash will be generated automatically by builder. *Don't need to edit*.
            token:
              description: >-
                Replace your own token. *token* value should be encoded by base64.
            sender:
              description: Replace your own sender address.

    CurrencyRegisterFact:
      allOf:
        - $ref: '#/components/schemas/BaseFact'
        - type: object
          required:
          - _hint
          - hash
          - token
          - currency
          properties:
            _hint:
              allOf:
                - $ref: '#/components/schemas/Hint'
                - type: string
                  example: mitum-currency-currency-register-operation-fact-v0.0.1
                  default: mitum-currency-currency-register-operation-fact-v0.0.1
            hash:
              type: string
              format: hash
              example: 4jhzcudKgtoPGR6rA7Fuxmfwz3C8KGiP5MEKXuBXcW9j
            token:
              description: >-
                *token* value should be encoded by base64.
              type: string
              format: bytes
              example: cmFpc2VkIGJ5
            currency:
              allOf:
                - $ref: '#/components/schemas/CurrencyDesign'

    CurrencyRegisterFactForTemplate:
      allOf:
        - $ref: '#/components/schemas/CurrencyRegisterFact'
        - type: object
          properties:
            hash:
              description: >-
                The value of hash will be generated automatically by builder. *Don't need to edit*.
            token:
              description: >-
                Replace your own token. *token* value should be encoded by base64.

    CurrencyPolicyUpdaterFact:
      allOf:
        - $ref: '#/components/schemas/BaseFact'
        - type: object
          required:
          - _hint
          - hash
          - token
          - currency
          - policy
          properties:
            _hint:
              allOf:
                - $ref: '#/components/schemas/Hint'
                - type: string
                  example: mitum-currency-currency-register-operation-fact-v0.0.1
                  default: mitum-currency-currency-register-operation-fact-v0.0.1
            hash:
              type: string
              format: hash
              example: 4jhzcudKgtoPGR6rA7Fuxmfwz3C8KGiP5MEKXuBXcW9j
            token:
              description: >-
                *token* value should be encoded by base64.
              type: string
              format: bytes
              example: cmFpc2VkIGJ5
            currency:
              allOf:
                - $ref: '#/components/schemas/CurrencyID'
            policy:
              allOf:
                - $ref: '#/components/schemas/CurrencyPolicy'

    CurrencyPolicyUpdaterFactForTemplate:
      allOf:
        - $ref: '#/components/schemas/CurrencyPolicyUpdaterFact'
        - type: object
          properties:
            hash:
              description: >-
                The value of hash will be generated automatically by builder. *Don't need to edit*.
            token:
              description: >-
                Replace your own token. *token* value should be encoded by base64.

    CurrencyID:
      description: currency unique id(or name)
      type: string
      example: XXX

    AccountValue:
      allOf:
        - $ref: '#/components/schemas/Account'
        - type: object
          required:
          - balance
          - height
          - previous_height
          properties:
            balance:
              $ref: '#/components/schemas/Amount'
            height:
              $ref: '#/components/schemas/Height'
            previous_height:
              $ref: '#/components/schemas/Height'

    OperationValue:
      type: object
      required:
      - _hint
      - hash
      - operation
      - height
      - confirmed_at
      - in_state
      - index
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              example: mitum-currency-operation-value-v0.0.1
              default: mitum-currency-operation-value-v0.0.1
        hash:
          description: operation value hash, not operation hash
          type: string
          format: hash
          example: 6GymxmuvhgUfAKWYQUKKveYh1H8b981vQaZcMsbWqykS
        operation:
          oneOf:
            - $ref: '#/components/schemas/CreateAccounts'
              description : create-accounts
            - $ref: '#/components/schemas/KeyUpdater'
            - $ref: '#/components/schemas/Transfers'
            - $ref: '#/components/schemas/CurrencyRegister'
            - $ref: '#/components/schemas/CurrencyPolicyUpdater'
            - $ref: '#/components/schemas/CreateDocuments'
            - $ref: '#/components/schemas/TransferDocuments'
            - $ref: '#/components/schemas/SignDocuments'
        height:
          $ref: '#/components/schemas/Height'
        confirmed_at:
          type: string
          format: date-time
          example: "2020-10-13T14:37:20Z"
        in_state:
          description: Whether the operation is in block or not. If `false`, the operation is processed, but ignored with it's own problem.
          type: boolean
          example: true
        index:
          type: integer
        reason:
          $ref: '#/components/schemas/ReasonError'
          description: It describes the rejected reason of operation.

    DocumentValue:
      type: object
      required:
      - _hint
      - document
      - height
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              example: mitum-blocksign-document-value-v0.0.1
              default: mitum-blocksign-document-value-v0.0.1
        document:
          description: document data
          type: object
          properties:
            _hint:
              allOf:
                - $ref: '#/components/schemas/Hint'
                - type: string
                  default: mitum-blocksign-document-data-v0.0.1
                  example: mitum-blocksign-document-data-v0.0.1
            documentinfo:
              type: object
              properties:
                _hint:
                  allOf:
                    - $ref: '#/components/schemas/Hint'
                    - type: string
                      default: mitum-blocksign-document-info-v0.0.1
                      example: mitum-blocksign-document-info-v0.0.1 
                documentid:
                  type: integer
                filehash:
                  type: string
            creator:
              allOf:
                - $ref: '#/components/schemas/AccountAddress'
            owner:
              allOf:
                - $ref: '#/components/schemas/AccountAddress'
            signers:
              type: array
              items:
                  allOf:
                  - $ref: '#/components/schemas/AccountAddress'
        height:
          $ref: '#/components/schemas/Height'

    CurrencyDesign:
      type: object
      required:
      - _hint
      - amount
      - genesis_account
      - policy
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: mitum-currency-currency-design-v0.0.1
              example: mitum-currency-currency-design-v0.0.1
        amount:
          $ref: '#/components/schemas/Amount'
        genesis_account:
          allOf:
            - $ref: '#/components/schemas/AccountAddress'
            - description: genesis account address, which will hold genesis balance
        policy:
          $ref: '#/components/schemas/CurrencyPolicy'

    Amount:
      type: object
      required:
      - _hint
      - hash
      - amount
      - currency
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: mitum-currency-amount-v0.0.1
              example: mitum-currency-amount-v0.0.1
        hash:
          type: string
          format: hash
          example: yaJGkXgizfaB3HEAf9LWdWBC3Sh954pzuc2tNTM9PHG
        amount:
          type: string
          description: amount
          example: 33
          default: 33
        currency:
          $ref: '#/components/schemas/CurrencyID'

    CurrencyPolicy:
      description: currency policy
      type: object
      required:
      - _hint
      - new_account_min_balance
      - feeer
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: mitum-currency-currency-policy-v0.0.1
              example: mitum-currency-currency-policy-v0.0.1
        _hash:
          type: string
          format: hash
          example: yaJGkXgizfaB3HEAf9LWdWBC3Sh954pzuc2tNTM9PHG
        new_account_min_balance:
          allOf:
            - $ref: '#/components/schemas/Amount'
            - description: minimum balance for new account
        feeer:
          description: fee policy
          type: object
          oneOf:
            - $ref: '#/components/schemas/NilFeeer'
            - $ref: '#/components/schemas/FixedFeeer'
            - $ref: '#/components/schemas/RatioFeeer'

    NilFeeer:
      description: fee policy, which does not charge fee
      type: object
      required:
      - _hint
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: mitum-currency-nil-feeer-v0.0.1
              example: mitum-currency-nil-feeer-v0.0.1
        type:
          type: string
          example: 'nil'
          default: 'nil'

    FixedFeeer:
      description: fee policy, which does charge fixed amount
      type: object
      required:
      - _hint
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: mitum-currency-fixed-feeer-v0.0.1
              example: mitum-currency-fixed-feeer-v0.0.1
        type:
          type: string
          example: 'fixed'
          default: 'fixed'
        receiver:
          allOf:
            - $ref: '#/components/schemas/AccountAddress'
            - description: accound address for receving collected fee
        amount:
          allOf:
            - $ref: '#/components/schemas/Amount'
            - description: fee amount

    RatioFeeer:
      description: fee policy, which does charge fee by transfer amount
      type: object
      required:
      - _hint
      properties:
        _hint:
          allOf:
            - $ref: '#/components/schemas/Hint'
            - type: string
              default: mitum-currency-ratio-feeer-v0.0.1
              example: mitum-currency-ratio-feeer-v0.0.1
        type:
          type: string
          example: 'ratio'
          default: 'ratio'
        receiver:
          allOf:
            - $ref: '#/components/schemas/AccountAddress'
            - description: accound address for receving collected fee
        min:
          allOf:
            - $ref: '#/components/schemas/Amount'
            - description: minimum amounf of fee
        max:
          allOf:
            - $ref: '#/components/schemas/Amount'
            - description: maximum amounf of fee

    NodeAddress:
      type: string
      description: node address
      example: 'node0-a000:0.0.1'

    NodePublicKey:
      type: string
      description: node publickey
      example: 'd1bAKFaft9MvowhT3xzbZKJnNN6V3icti66T8ozrZtkH:btc-pub-v0.0.1'

    AccountAddress:
      description: account address
      type: string

    ReasonError:
      type: object
      required:
        - msg
      properties:
        msg:
          description: reason message
          type: string
          example: 'insufficient balance'
        data:
          description: additional data
          type: object

# vi: ft=yaml tw=100 ts=2 sw=2 expandtab smarttab
